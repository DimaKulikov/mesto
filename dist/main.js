(()=>{"use strict";class e{constructor(e,t,s,r){this._templateSelector=s,this._name=e,this._url=t,this._isLiked=!1,this._imageClickHandler=r}_getTemplate(){return document.querySelector(this._templateSelector).content.cloneNode(!0).querySelector(".card")}_handleLike(){this._isLiked=!this._isLiked,this._likeBtn.classList.toggle("card__like-btn_active")}_handleRemove(){this._element.remove(),this._element=null,this._image=null,this._title=null,this._likeBtn=null,this._removeBtn=null}_setEventListeners(){this._likeBtn.addEventListener("click",(()=>{this._handleLike()})),this._removeBtn.addEventListener("click",(()=>{this._handleRemove()})),this._image.addEventListener("click",(()=>{this._imageClickHandler(this._name,this._url)}))}_getElements(){this._element=this._getTemplate(),this._image=this._element.querySelector(".card__pic"),this._title=this._element.querySelector(".card__title"),this._likeBtn=this._element.querySelector(".card__like-btn"),this._removeBtn=this._element.querySelector(".card__remove-btn")}createCard(){return this._getElements(),this._image.src=this._url,this._image.alt=this._name,this._title.textContent=this._name,this._setEventListeners(),this._element}}class t{constructor(e,t){this._form=t,this._selectors=e}_showInputError(){this._lastInput.classList.add(this._selectors.inputErrorClass),this._errorContainer.textContent=this._errorMessage,this._errorContainer.classList.add(this._selectors.errorClass)}_hideInputError(){this._lastInput.classList.remove(this._selectors.inputErrorClass),this._errorContainer.classList.remove(this._selectors.errorClass),this._errorContainer.textContent=""}_isValid(){this._lastInput.validity.valid?this._hideInputError():(this._errorMessage=this._lastInput.validationMessage,this._showInputError())}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._button.classList.add(this._selectors.inactiveButtonClass),this._button.disabled=!0):(this._button.classList.remove(this._selectors.inactiveButtonClass),this._button.disabled=!1)}_inputChangeHandler(e){this._lastInput=e.target,this._errorContainer=this._form.querySelector(`.${this._lastInput.id}-error`),this._isValid(),this._toggleButtonState()}_submitHandler(e){e.preventDefault()}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(e=>{this._inputChangeHandler(e)}))})),this._form.addEventListener("submit",(e=>{this._submitHandler(e)}))}_getElements(){this._inputList=Array.from(this._form.querySelectorAll(this._selectors.inputSelector)),this._button=this._form.querySelector(this._selectors.submitButtonSelector)}enableValidation(){this._getElements(),this._setEventListeners()}}const s={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_active"},r=document.querySelectorAll(".popup"),n=document.querySelector(".profile"),i=n.querySelector(".profile__name"),o=n.querySelector(".profile__subtitle"),l=document.querySelector(".profile__edit-btn"),a=document.querySelector(".popup_profile-edit"),c=a.querySelector("form[name=profileEditForm]"),_=c.querySelector("input[name=profileNameInput]"),u=c.querySelector("input[name=profileSubtitleInput]"),d=(c.querySelector(".form__submit"),document.querySelector(".profile__add-btn")),p=document.querySelector(".popup_place-add"),h=p.querySelector("form[name=placeAddForm]"),m=h.querySelector("input[name=placeNameInput]"),v=h.querySelector("input[name=placeImageInput]"),y=h.querySelector(".form__submit"),f=document.querySelector(".popup_image"),S=f.querySelector(".popup__image"),b=f.querySelector(".popup__subtitle"),g=document.querySelector(".cards__list");function L(e){e.classList.add("popup_opened"),document.addEventListener("keydown",E)}function k(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",E)}function E(e){"Escape"===e.key&&k(document.querySelector(".popup_opened"))}const q=new t(s,c),C=new t(s,h);function I(e,t){L(f),S.src=t,S.alt=e,b.textContent=e}q.enableValidation(),C.enableValidation(),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((t=>{const s=new e(t.name,t.link,"#card-template",I);g.prepend(s.createCard())})),c.addEventListener("submit",(()=>{i.textContent=_.value,o.textContent=u.value,k(a)})),placeAddForm.addEventListener("submit",(()=>{const t=new e(m.value,v.value,"#card-template",I);g.prepend(t.createCard()),m.value="",v.value="",y.classList.add(s.inactiveButtonClass),y.disabled=!0,k(p)})),l.addEventListener("click",(function(){L(a),_.value=i.textContent,u.value=o.textContent;const e=new Event("input",{bubbles:!0,cancelable:!0});_.dispatchEvent(e),u.dispatchEvent(e)})),d.addEventListener("click",(function(){L(p)})),r.forEach((e=>{e.addEventListener("click",(t=>{(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-btn"))&&k(e)}))}))})();